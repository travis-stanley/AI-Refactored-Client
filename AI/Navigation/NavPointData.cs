// <auto-generated>
//   This file is part of AI-Refactored, an open-source project focused on realistic AI behavior in Escape from Tarkov.
//   Licensed under the MIT License. See LICENSE in the repository root for more information.
//
//   THIS FILE IS SYSTEMATICALLY MANAGED.
//   Please follow strict StyleCop, ReSharper, and AI-Refactored code standards for all modifications.
// </auto-generated>

namespace AIRefactored.AI.Navigation
{
    using System;
    using UnityEngine;

    /// <summary>
    /// Immutable tactical navigation point used by AIRefactored for pathfinding, cover, and zone awareness.
    /// Fully precomputed for ultra-fast lookup and zero allocations.
    /// </summary>
    public sealed class NavPointData
    {
        #region Fields

        public readonly Vector3 Position;
        public readonly bool IsCover;
        public readonly string Tag;
        public readonly float Elevation;
        public readonly bool IsIndoor;
        public readonly bool IsJumpable;
        public readonly float CoverAngle;
        public readonly string Zone;
        public readonly string ElevationBand;

        #endregion

        #region Constructor

        public NavPointData(
            Vector3 position,
            bool isCover,
            string tag,
            float elevation,
            bool isIndoor,
            bool isJumpable,
            float coverAngle,
            string zone,
            string elevationBand)
        {
            if (tag == null)
            {
                throw new ArgumentNullException(nameof(tag), "NavPointData constructor: tag must not be null.");
            }

            if (zone == null)
            {
                throw new ArgumentNullException(nameof(zone), "NavPointData constructor: zone must not be null.");
            }

            if (elevationBand == null)
            {
                throw new ArgumentNullException(nameof(elevationBand), "NavPointData constructor: elevationBand must not be null.");
            }

            this.Position = position;
            this.IsCover = isCover;
            this.Tag = tag;
            this.Elevation = elevation;
            this.IsIndoor = isIndoor;
            this.IsJumpable = isJumpable;
            this.CoverAngle = coverAngle;
            this.Zone = zone;
            this.ElevationBand = elevationBand;
        }

        #endregion

        #region Public Methods

        /// <summary>
        /// Computes the squared distance from this point to a target world position.
        /// </summary>
        public float DistanceSqr(Vector3 other)
        {
            float dx = this.Position.x - other.x;
            float dy = this.Position.y - other.y;
            float dz = this.Position.z - other.z;
            return (dx * dx) + (dy * dy) + (dz * dz);
        }

        /// <summary>
        /// Returns a compact string representation for debugging and diagnostics.
        /// </summary>
        public override string ToString()
        {
            return string.Concat(
                "[", this.Tag, "] ",
                this.Position.ToString(),
                " | Cover=", this.IsCover ? "Y" : "N",
                " Jump=", this.IsJumpable ? "Y" : "N",
                " Indoor=", this.IsIndoor ? "Y" : "N",
                " Zone=", this.Zone,
                " ElevBand=", this.ElevationBand);
        }

        #endregion
    }
}
